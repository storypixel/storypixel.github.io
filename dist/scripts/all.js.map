{"version":3,"sources":["home.js"],"names":["init","organizeThoughts","initScrollTasks","last_known_scroll_position","ticking","sections","document","querySelectorAll","thoughts","processActives","updateProgress","scroll_pos","scrolledPast","Array","from","filter","el","getBoundingClientRect","top","activeThoughtWrapper","length","topOfActive","getElementById","style","width","offsetHeight","watchThoughts","className","forEach","console","log","bottom","classList","add","window","addEventListener","e","scrollY","requestAnimationFrame","elements","i","thisClassName","onload"],"mappings":";;AAAA;AAEA,SAASA,IAAT,GAAgB;AACdC;AACAC;AACD,C,CAED;;;AACA,SAASA,eAAT,GAA2B;AACzB,MAAIC,6BAA6B,CAAjC;AACA,MAAIC,UAAU,KAAd;AAEA,MAAIC,WAAWC,SAASC,gBAAT,CAA0B,kBAA1B,CAAf;AACA,MAAIC,WAAWF,SAASC,gBAAT,CAA0B,UAA1B,CAAf;;AAEA,WAASE,cAAT,GAA0B,CAEzB;;AAGD,WAASC,cAAT,CAAwBC,UAAxB,EAAoC;AAClC,QAAIC,eAAeC,MAAMC,IAAN,CAAWT,QAAX,EAAqBU,MAArB,CAA4B,UAACC,EAAD,EAAQ;AACrD,aAAOA,GAAGC,qBAAH,GAA2BC,GAA3B,IAAkC,CAAzC;AACD,KAFkB,CAAnB;AAGA,QAAIC,uBAAuBP,aAAaA,aAAaQ,MAAb,GAAsB,CAAnC,CAA3B;;AACA,QAAID,oBAAJ,EAA0B;AACxB,UAAIE,cAAcF,qBAAqBF,qBAArB,GAA6CC,GAA/D;AACAZ,eAASgB,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,KAA1C,GAAkD,MAAM,CAACH,WAAP,GAAqBF,qBAAqBM,YAA1C,GAAyD,IAA3G;AACD;AACF;;AAED,WAASC,aAAT,CAAuBf,UAAvB,EAAmC;AACjC,QAAIgB,YAAY,QAAhB;AACA,QAAIf,eAAeC,MAAMC,IAAN,CAAWN,QAAX,EAAqBoB,OAArB,CAA6B,UAACZ,EAAD,EAAQ;AACtD,UAAIA,GAAGC,qBAAH,GAA2BC,GAA3B,IAAkC,CAAtC,EAAyC;AACvCW,gBAAQC,GAAR,CAAY,6BAAZ,EAA2Cd,GAAGC,qBAAH,GAA2Bc,MAAtE;AACA,YAAIf,GAAGgB,SAAP,EACEhB,GAAGgB,SAAH,CAAaC,GAAb,CAAiBN,SAAjB,EADF,KAGEX,GAAGW,SAAH,IAAgB,MAAMA,SAAtB;AACD;AACF,KARgB,CAAnB;AASD;;AAEDO,SAAOC,gBAAP,CAAwB,QAAxB,EAAkC,UAAUC,CAAV,EAAa;AAC7CjC,iCAA6B+B,OAAOG,OAApC;;AAEA,QAAI,CAACjC,OAAL,EAAc;AACZ8B,aAAOI,qBAAP,CAA6B,YAAY;AACvC5B,uBAAeP,0BAAf;AACAuB,sBAAcvB,0BAAd;AACAC,kBAAU,KAAV;AACD,OAJD;AAKAA,gBAAU,IAAV;AACD;AAEF,GAZD;AAaD,C,CAED;;;AACA,SAASH,gBAAT,GAA4B;AAC1B,MAAI0B,YAAY,SAAhB;AACA,MAAIY,WAAWjC,SAASC,gBAAT,CAA0B,UAA1B,CAAf;AAEAgC,WAASX,OAAT,CAAiB,UAAUZ,EAAV,EAAcwB,CAAd,EAAiB;AAChC,QAAIC,gBAAgBd,YAAY,GAAZ,GAAkBa,CAAtC;AACA,QAAIxB,GAAGgB,SAAP,EAAkBhB,GAAGgB,SAAH,CAAaC,GAAb,CAAiBQ,aAAjB,EAAlB,KACKzB,GAAGW,SAAH,IAAgB,MAAMc,aAAtB;AACN,GAJD;AAKD;;AAEDP,OAAOQ,MAAP,GAAgB,YAAY;AACxB1C;AACF,CAFF","file":"all.js","sourcesContent":["// Wait until stuff loads\n\nfunction init() {\n  organizeThoughts();\n  initScrollTasks();\n}\n\n// Set up scrolling action\nfunction initScrollTasks() {\n  let last_known_scroll_position = 0;\n  let ticking = false;\n\n  let sections = document.querySelectorAll(\".thought-wrapper\");\n  let thoughts = document.querySelectorAll(\".thought\");\n\n  function processActives() {\n    \n  }\n\n\n  function updateProgress(scroll_pos) {\n    let scrolledPast = Array.from(sections).filter((el) => {\n      return el.getBoundingClientRect().top <= 0;\n    });\n    let activeThoughtWrapper = scrolledPast[scrolledPast.length - 1]\n    if (activeThoughtWrapper) {\n      let topOfActive = activeThoughtWrapper.getBoundingClientRect().top\n      document.getElementById('progress').style.width = 100 * -topOfActive / activeThoughtWrapper.offsetHeight + 'vw';\n    }\n  }\n\n  function watchThoughts(scroll_pos) {\n    let className = \"active\"\n    let scrolledPast = Array.from(thoughts).forEach((el) => {\n      if (el.getBoundingClientRect().top <= 0) {\n        console.log(\"this el has top less than 0\", el.getBoundingClientRect().bottom )\n        if (el.classList)\n          el.classList.add(className);\n        else\n          el.className += ' ' + className;\n        }\n      });\n  }\n\n  window.addEventListener('scroll', function (e) {\n    last_known_scroll_position = window.scrollY;\n\n    if (!ticking) {\n      window.requestAnimationFrame(function () {\n        updateProgress(last_known_scroll_position);\n        watchThoughts(last_known_scroll_position);\n        ticking = false;\n      });\n      ticking = true;\n    }\n\n  });\n}\n\n// Put color classes on the .thought items. Color classes gen'd by SCSS\nfunction organizeThoughts() {\n  let className = \"thought\";\n  let elements = document.querySelectorAll(\".thought\");\n\n  elements.forEach(function (el, i) {\n    let thisClassName = className + \"-\" + i;\n    if (el.classList) el.classList.add(thisClassName);\n    else el.className += \" \" + thisClassName;\n  });\n}\n\nwindow.onload = function () {\n    init();\n }"]}