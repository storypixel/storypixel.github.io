{"version":3,"sources":["home.js"],"names":["init","organizeThoughts","initScrollTasks","last_known_scroll_position","ticking","sections","document","querySelectorAll","thoughts","activeNodes","processActives","updateProgress","scroll_pos","scrolledPast","Array","from","filter","el","getBoundingClientRect","top","activeThoughtWrapper","length","topOfActive","getElementById","style","width","offsetHeight","watchThoughts","className","forEach","d","documentElement","offset","scrollTop","window","innerHeight","height","clientHeight","classList","add","addEventListener","e","scrollY","requestAnimationFrame","elements","i","thisClassName","onload"],"mappings":"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","file":"all.js","sourcesContent":["// Wait until stuff loads\n\nfunction init() {\n  organizeThoughts();\n  initScrollTasks();\n}\n\n// Set up scrolling action\nfunction initScrollTasks() {\n  let last_known_scroll_position = 0;\n  let ticking = false;\n\n  let sections = document.querySelectorAll(\".thought-wrapper\");\n  let thoughts = document.querySelectorAll(\".thought\");\n  var activeNodes = [];\n\n  function processActives() {\n    \n  }\n\n  function updateProgress(scroll_pos) {\n    let scrolledPast = Array.from(sections).filter((el) => {\n      return el.getBoundingClientRect().top <= 0;\n    });\n    let activeThoughtWrapper = scrolledPast[scrolledPast.length - 1]\n    if (activeThoughtWrapper) {\n      let topOfActive = activeThoughtWrapper.getBoundingClientRect().top\n      document.getElementById('progress').style.width = 100 * -topOfActive / activeThoughtWrapper.offsetHeight + 'vw';\n    }\n  }\n\n  function watchThoughts(scroll_pos) {\n    let className = \"active\"\n    let scrolledPast = Array.from(thoughts).forEach((el) => {\n      var d = document.documentElement;\n      var offset = d.scrollTop + window.innerHeight;\n      var height = d.offsetHeight;\n    \n      // console.log('offset = ' + offset);\n      // console.log('height = ' + height);\n    \n      // if (offset === height) {\n      //   console.log('At the bottom');\n      // }\n\n      if (el.getBoundingClientRect().top <= d.clientHeight/2) {\n        // console.log(\"this el has top less than 0\", el.getBoundingClientRect().bottom )\n        if (el.classList)\n          el.classList.add(className);\n        else\n          el.className += ' ' + className;\n        }\n      });\n  }\n\n  window.addEventListener('scroll', function (e) {\n    last_known_scroll_position = window.scrollY;\n\n    if (!ticking) {\n      window.requestAnimationFrame(function () {\n        updateProgress(last_known_scroll_position);\n        watchThoughts(last_known_scroll_position);\n        ticking = false;\n      });\n      ticking = true;\n    }\n  });\n\n  watchThoughts(0);\n}\n\n// Put color classes on the .thought items. Color classes gen'd by SCSS\nfunction organizeThoughts() {\n  let className = \"thought\";\n  let elements = document.querySelectorAll(\".thought\");\n\n  elements.forEach(function (el, i) {\n    let thisClassName = className + \"-\" + i;\n    if (el.classList) el.classList.add(thisClassName);\n    else el.className += \" \" + thisClassName;\n  });\n}\n\nwindow.onload = function () {\n    init();\n }"]}